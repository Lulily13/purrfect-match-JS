---
import { getCollection } from 'astro:content';
import { COLLECTIONS, type CollectionsType } from '../../constants/collections';

export async function getStaticPaths() {
    const collections = await Promise.all(
        COLLECTIONS.map((collectionName: string) => getCollection(collectionName as CollectionsType))
    );

    return collections.flat().map((post) => {
        return {
            params: { animal: post.data.type, slug: post.slug },
            props: post,
        };
    });
}

const post = Astro.props;
---

<pre>{JSON.stringify(post, undefined, 4)}</pre>
