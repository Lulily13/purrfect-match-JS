---
import { getCollection } from 'astro:content';

// const { animal } = Astro.params;

// function getCollectionName(path) {
//     switch (path) {
//         case 'cat':
//             return 'cat';
//         case 'dog':
//             return 'dog';
//         default:
//             throw new Error(`Unknown animal: ${path}`);
//     }
// }

export async function getStaticPaths() {
    const collectionNames = ['cat', 'dog'];
    const collections = await Promise.all(collectionNames.map((collectionName) => getCollection(collectionName)));
    return collections.flat().map((post) => {
        return {
            params: { animal: `${post.data.type}s`, slug: post.slug },
            props: post,
        };
    });
}

const post = Astro.props;
---

<pre>{JSON.stringify(post, undefined, 4)}</pre>
